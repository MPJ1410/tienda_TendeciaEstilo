â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GUÃA: AUTENTICACIÃ“N CON SUPABASE AUTH                       â”‚
â”‚  Sistema de Login Seguro para Panel Admin                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 1: CONFIGURAR POLÃTICAS DE SEGURIDAD EN SUPABASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Ve a tu proyecto en Supabase: https://app.supabase.com
2. Ve a "SQL Editor" (menÃº lateral izquierdo)
3. Click en "New query"
4. Copia y pega el contenido de: supabase-auth-setup.sql
5. Click en "Run" (botÃ³n verde)
6. DeberÃ­as ver: "Success"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 2: CREAR USUARIO ADMINISTRADOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OPCIÃ“N A: Desde la Consola del Navegador (RECOMENDADO)
-------------------------------------------------------
1. Abre: http://localhost:8000/admin.html
2. Abre la consola del navegador (F12)
3. Ejecuta este comando:

AuthService.register('admin@tendenciayestilo.com', 'TuContraseÃ±aSegura123!')
  .then(result => {
    if (result.success) {
      console.log('âœ… Usuario admin creado:', result.user.email);
    } else {
      console.error('âŒ Error:', result.error);
    }
  });

4. Espera la confirmaciÃ³n en la consola


OPCIÃ“N B: Desde Supabase Dashboard
-----------------------------------
1. Ve a "Authentication" â†’ "Users"
2. Click en "Add user" â†’ "Create new user"
3. Email: admin@tendenciayestilo.com
4. Password: TuContraseÃ±aSegura123!
5. Auto Confirm User: âœ“ ACTIVADO
6. Click en "Create user"


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PASO 3: PROBAR EL LOGIN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abre: http://localhost:8000/admin.html
2. Ingresa:
   Email: admin@tendenciayestilo.com
   Password: TuContraseÃ±aSegura123!
3. Click en "Ingresar"
4. DeberÃ­as ver el panel de administraciÃ³n


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CÃ“MO FUNCIONA LA AUTENTICACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES (Sistema Simple):
-----------------------
âœ— ContraseÃ±a hardcodeada en el cÃ³digo
âœ— Cualquiera puede ver la contraseÃ±a en el cÃ³digo fuente
âœ— No hay usuarios reales
âœ— Inseguro para producciÃ³n

AHORA (Supabase Auth):
----------------------
âœ“ Email + ContraseÃ±a real
âœ“ ContraseÃ±as encriptadas en Supabase
âœ“ Sesiones seguras con JWT
âœ“ MÃºltiples usuarios posibles
âœ“ Listo para producciÃ³n


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  POLÃTICAS DE SEGURIDAD (RLS)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LECTURA (SELECT):
-----------------
âœ“ Cualquiera puede VER productos
âœ“ La tienda pÃºblica funciona sin login

ESCRITURA (INSERT/UPDATE/DELETE):
----------------------------------
âœ“ Solo usuarios AUTENTICADOS pueden:
  - Agregar productos
  - Editar productos
  - Eliminar productos

RESULTADO:
----------
âœ“ Tienda pÃºblica: Funciona sin restricciones
âœ“ Panel Admin: Requiere login con Supabase Auth


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ARCHIVOS MODIFICADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ auth-service.js              â†’ Servicio de autenticaciÃ³n
âœ“ supabase-auth-setup.sql      â†’ PolÃ­ticas de seguridad
âœ“ admin.html                   â†’ Formulario con email
âœ“ admin-script.js              â†’ Login con Supabase Auth


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  FUNCIONES DEL AUTH SERVICE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AuthService.login(email, password)
  â†’ Iniciar sesiÃ³n

AuthService.logout()
  â†’ Cerrar sesiÃ³n

AuthService.getCurrentUser()
  â†’ Obtener usuario actual

AuthService.isAuthenticated()
  â†’ Verificar si hay sesiÃ³n activa

AuthService.register(email, password)
  â†’ Crear nuevo usuario (solo para setup inicial)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SOLUCIÃ“N DE PROBLEMAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEMA: "Email o contraseÃ±a incorrectos"
SOLUCIÃ“N:
- Verifica que el usuario exista en Supabase
- Ve a Authentication â†’ Users en Supabase
- Confirma que el email sea correcto
- Intenta resetear la contraseÃ±a

PROBLEMA: "new row violates row-level security policy"
SOLUCIÃ“N:
- Ejecuta supabase-auth-setup.sql en SQL Editor
- Verifica que estÃ©s logueado en el admin
- Revisa la consola para ver si hay sesiÃ³n activa

PROBLEMA: "No puedo crear el usuario admin"
SOLUCIÃ“N:
- Usa la OpciÃ³n B (crear desde Supabase Dashboard)
- AsegÃºrate de marcar "Auto Confirm User"
- Verifica que el email sea vÃ¡lido

PROBLEMA: "El login no funciona"
SOLUCIÃ“N:
- Abre la consola (F12)
- Busca errores en rojo
- Verifica que auth-service.js estÃ© cargado
- Confirma que la API key sea correcta


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  AGREGAR MÃS ADMINISTRADORES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para agregar mÃ¡s usuarios admin:

1. Ve a Supabase Dashboard
2. Authentication â†’ Users
3. Click en "Add user"
4. Ingresa email y contraseÃ±a
5. Auto Confirm User: âœ“
6. Create user

O desde la consola:
AuthService.register('nuevo@admin.com', 'ContraseÃ±aSegura123!')


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SEGURIDAD EN PRODUCCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Las contraseÃ±as NUNCA se guardan en texto plano
âœ“ Supabase usa bcrypt para encriptar contraseÃ±as
âœ“ Las sesiones usan JWT (JSON Web Tokens)
âœ“ Los tokens expiran automÃ¡ticamente
âœ“ Las polÃ­ticas RLS protegen la base de datos
âœ“ Solo usuarios autenticados pueden modificar datos


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CREDENCIALES RECOMENDADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Email: admin@tendenciayestilo.com
Password: [Elige una contraseÃ±a segura]

Requisitos de contraseÃ±a:
- MÃ­nimo 6 caracteres
- Combina letras y nÃºmeros
- Incluye mayÃºsculas y minÃºsculas
- Ejemplo: TendenciaEstilo2024!


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ“ Ejecutar supabase-auth-setup.sql
2. âœ“ Crear usuario admin
3. âœ“ Probar login
4. âœ“ Agregar productos desde el panel
5. âœ“ Verificar que funcione la tienda pÃºblica


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMANDOS ÃšTILES (CONSOLA)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Ver usuario actual
AuthService.getCurrentUser().then(console.log)

// Verificar si estoy autenticado
AuthService.isAuthenticated().then(console.log)

// Cerrar sesiÃ³n
AuthService.logout()

// Crear nuevo admin
AuthService.register('email@ejemplo.com', 'password123')


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NOTAS IMPORTANTES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ El sistema de autenticaciÃ³n es REAL y SEGURO
âœ“ Las contraseÃ±as estÃ¡n encriptadas en Supabase
âœ“ Puedes tener mÃºltiples administradores
âœ“ Las sesiones persisten entre recargas
âœ“ El logout cierra la sesiÃ³n correctamente
âœ“ La tienda pÃºblica NO requiere autenticaciÃ³n
âœ“ Solo el panel admin requiere login


Â¡Tu panel de administraciÃ³n ahora es SEGURO y estÃ¡ listo para producciÃ³n! ğŸ‰
